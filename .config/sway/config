set {
  $mod Mod4

  $left  h
  $down  j
  $up    k
  $right l

  # Output
  $laptop  eDP-1
  $dp_out  DP-1
  $dp_out2 DP-2
  $dp_out3 DP-3
  $hdmi    HDMI-A-1

  # Modes
  $layout_mode "Layout: (d) stacking|(t) tabbed|(s) split|(v) splitv|(h) splith"
  $power_mode  "Power: (F2)SCRNOFF | (F3)LCK | (F4)RBT | (F5)POFF"
  $notification_mode "Notification: (s) Stop | (d) Default | (n) dismiss | (a) Action"

  # Theming
  $gnome-sound     org.gnome.desktop.sound
  $gnome-interface org.gnome.desktop.interface
  $font     pango:Hack Nerd Font Mono, Source Code Pro 16

  # Apps
  $launch       fuzzel-prompt.sh
  $launch-dmenu fuzzel-dmenu
  $term_id quake_term
  $term    wezterm start --class $term_id
  $pass    keepassxc
  $pass_id org.keepassxc.KeePassXC
  $oterm    alacritty --class oterm --working-directory /data/media/youtube
  $oterm_id oterm
  $editor_id emacs_float
  $editor    emacs --name $editor_id
  $browser   firefox
  $o_browser vieb.sh
  $lock sleep.sh
  $nag swaynag -t warning \
               -m 'Hello. Do you really want to exit sway? This will end your Wayland session.' \
               -b 'Suspend' 'systemctl suspend' \
               -b 'Lock' '$lock' \
               -b 'Shutdown' 'systemctl -i poweroff' \
               -b 'Reboot' 'systemctl -i reboot' \
               -b 'Yes, exit sway' 'swaymsg exit' \
               --button-background=#FF9100 \
               --button-border-size=3px \
               --border=#FCC99D \
               --text=#092E47 \
               --font=Hack Nerd Font Mono 16 \
               --background=#282828

  $maximize border none, move position center, resize set width 100 ppt height 100 ppt
}

output {
  $laptop    background ~/images/wallpaper.avif         fill
  $hdmi      background ~/images/wallpaper_monitor.avif fill
  $dp_out    background ~/images/wallpaper_monitor.avif fill
  $dp_out2   background ~/images/wallpaper_monitor.avif fill
  $dp_out3   background ~/images/wallpaper_monitor.avif fill
  $laptop adaptive_sync on
  $laptop scale 1.5
  $laptop pos 0    0 res 2560x1600@90Hz
  $hdmi   pos 1706 0 res 2560x1440@144Hz
  #$dp_out pos 1706 0 res 2560x1440@75Hz
}

input type:keyboard {
  xkb_capslock disabled
  xkb_numlock  enabled
  xkb_layout   "us,ua"
  # xkb_variant  "colemak,"
  xkb_options  "grp:shift_caps_switch,compose:prsc"
}

input type:touchpad {
  accel_profile    adaptive
  click_method     button_areas
  click_method     clickfinger
  drag             enabled
  dwt              enabled
  middle_emulation enabled
  pointer_accel    0.8
  scroll_method    two_finger
  scroll_factor    1.5
  tap              enabled
}

input type:pointer {
  accel_profile    adaptive
  natural_scroll   disabled
  middle_emulation enabled
  pointer_accel    0.8
  scroll_factor    0.5
  scroll_button    BTN_SIDE
  scroll_method    on_button_down
}
input "39251:50:wylderbuilds_Dactyl-Manuform_Wyld_Trackball_(3x5_track)_Mouse" {
  accel_profile    adaptive
  natural_scroll   disabled
  middle_emulation enabled
  pointer_accel    1.0
  scroll_factor    1.5
  scroll_button    BTN_SIDE
  scroll_method    on_button_down
}

exec_always {
  gsettings set $gnome-interface cursor-theme        'capitaine-cursors'
  gsettings set $gnome-interface cursor-size         30
  gsettings set $gnome-interface document-font-name  'Hack Nerd Font Mono 16'
  gsettings set $gnome-interface font-name           'Hack Nerd Font Mono 16'
  gsettings set $gnome-interface gtk-theme           'Gruvbox-Dark'
  gsettings set $gnome-interface gtk-color-theme     'Gruvbox-Dark'
  gsettings set $gnome-interface icon-theme          'Acid-green-folder'
  gsettings set $gnome-interface monospace-font-name 'Hack Nerd Font Mono 16'
  gsettings set $gnome-interface text-scaling-factor 1.0
  gsettings set $gnome-sound     theme-name          'deepin'
}

seat seat0 xcursor_theme capitaine-cursors 30
# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
# font pango:DejaVu Sans Mono 8
font $font

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod normal
hide_edge_borders --i3 smart

workspace_layout tabbed
workspace_auto_back_and_forth no
workspace {
  1 output $laptop
  2 output $laptop
  3 output $hdmi
  4 output $hdmi
}

# assings
assign {
  [app_id="io.github.martinrotter.rssguard"]  2
  [app_id="org.telegram.desktop"]             2
  [app_id="thunderbird"]                      2
  [app_id="NewsFlashGTK"]                     2
  [app_id="elfeed"]                           2
  [app_id="slack"]                            3
  [app_id="zoom"]                             4
}

for_window {
  [shell="xwayland"] title_format "[X] %title"
  [app_id="firefox"]        inhibit_idle fullscreen
  [app_id="mpv"]            inhibit_idle focus
  [app_id="vivaldi-stable"] inhibit_idle fullscreen
  [app_id="screenshot"]     move to scratchpad
  [app_id="zoom"]        floating enable, inhibit_idle focus
  [window_role="pop-up"] floating enable
  [window_role="bubble"] floating enable
  [window_role="dialog"] floating enable
  [window_type="dialog"] floating enable
  # main terminal
  [app_id=$term_id] move to scratchpad, scratchpad show
  [app_id=$term_id] $maximize
  # backup terminal
  [app_id=$oterm_id] move to scratchpad, scratchpad show
  [app_id=$oterm_id] $maximize
  # keepassxc
  [app_id=$pass_id] move to scratchpad, scratchpad show
  [app_id=$pass_id] $maximize
  # emacs
  [app_id=$editor_id] move to scratchpad, scratchpad show
  [app_id=$editor_id] $maximize
}

include modes.sway
include binds.sway


# Start swaybar to display a workspace bar (plus the system information swaystatus
# finds out, if available)
bar {
  colors {
    # class            border    backgr.   text
    background         #282828AA
    statusline         #E1F5A9AA
    focused_separator  #6A0888AA
    focused_statusline #98971AAA
    focused_workspace  #B16286AA #B8BB26AA #FFFFFF
    active_workspace   #333333AA #331A00AA #FFFFFF
    inactive_workspace #333333AA #222222AA #888888
    urgent_workspace   #2f343aAA #EB4D4BAA #FFFFFF
    binding_mode       #2f343aAA #FF0000AA #FFFFFF
  }

  font $font
  pango_markup enabled
  position top
  status_command i3status-rs --never-pause # 2> ~/.local/log/i3status.log # env RUST_BACKTRACE=full
  workspace_buttons yes
  tray {
    icon_theme $icon_theme
    bindsym {
      # The middle button over a bar run nmtui
      button2 exec alacritty -e nmtui
    }
  }
}

# gaps
default_border pixel 3
smart_borders on
smart_gaps off
gaps {
  inner 0
  outer 0
}

# my settings
# class                 border   backgr.   text    indicator  child border
client.focused          #689D6A  #D65D0EAA #EBDBB2 #00DA8E    #4B610B
client.focused_inactive #689D6A  #D79921AA #504945 #484E50    #4B610B
client.unfocused        #689D6A  #282828AA #FADB2F #282828    #4B610B
client.urgent           #689D6A  #CC241DAA #A89984 #FB4934    #4B610B

exec --no-startup-id wl-paste -t text  --watch cliphist.sh &
exec --no-startup-id wl-paste -t image --watch cliphist store &
exec {
  systemctl --user import-environment \
    SWAYSOCK \
    WAYLAND_DISPLAY

  hash dbus-update-activation-environment 2>/dev/null
  dbus-update-activation-environment --systemd SWAYSOCK \
                                               WAYLAND_DISPLAY 2>/dev/null
  swaykbdd
  # touchegg
  idle.sh
  $term, $maximize
  systemctl --user start user-graphical-session.target
  network-startup
}
