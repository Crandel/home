#! /bin/bash

function command_exists () {
  command -v "$1"  > /dev/null 2>&1;
}

local='lo'
connection=0
while [ $connection == 0 ] ; do
  for interface in /sys/class/net/* ; do
    if [[ ! "$interface" == *"$local"* ]]; then
      connection=$(cat $interface/carrier)
    fi
  done
  sleep 0.5
done

if command_exists rssguard ; then
  sleep 0.5
  echo "run rssguard"
  rssguard &
fi

if command_exists evolution ; then
  sleep 0.5
  echo "run evolution"
  evolution &
fi

if command_exists telegram-desktop ; then
  sleep 0.5
  echo "run telegram-desktop"
  telegram-desktop &
fi

#if command_exists discord ; then
#  sleep 0.5
#  echo "run discord"
#  # GDK_BACKEND=x11 discord &
#  discord-ozone &
#fi

# if command_exists signal-desktop ; then
#   sleep 0.5
#   echo "run signal-desktop"
#   GDK_BACKEND=x11 signal-desktop &
# fi

# if command_exists slack ; then
#   sleep 0.5
#   echo "run slack"
#   GDK_BACKEND=x11 slack &
# fi
